<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/style.css">
    <title>Melodiediktat</title>
</head>
<body>
    <std-head></std-head>
    <script src="/hf.js"></script>
    <theorie-nav></theorie-nav>
    <div class="musiktheorie-main">
        <h1>Melodiediktat</h1>

        <p>
            Vor Beginn des Diktates wird ein Takt eingezählt, danach folgt ein Takt Pause. Beinhaltet das 
            Diktat einen Auftakt, beginnt dieser in diesem Takt. <br>
            <i>Beispiel:</i>
        </p>
        <img src="./mel-dik-media/beispiel.png" width="50%">

        <h2>Einstimmig</h2>
        <center>
            <button id="ein_button" onclick="ein_gen();">
                Neues Diktat aufrufen
            </button>
        </center>
        <center>
            <p id="hint"></p>
        </center>
        <center>
            <audio id="ein-audio" controls autoplay>
                <source src="" type="audio/mpeg">
            </audio>
        </center>
            
        <center>
            <button id="ein_aufloesen" onclick="ein_aufloesen();">
                Auflösen
            </button>
        </center>
        <center>
            <img id="ein-img" src="" width="80%">
        </center>
        <hr>


            <script>
                function ein_gen() {
                    var min = 1;
                    var max = 3;
                    var n = Math.random() * (max - min) + min;
                    n = Math.round(n);
                    var aud = document.getElementById("ein-audio");
                    aud.src = "./mel-dik-media/" + String(n) + ".mp3";
                    aud.volume = 0.2;
                    aud.autoplay = false;
                    aud.load();
                    fetch('./mel-dik-media/tonarten.json')
                    .then((response) => response.json())
                    .then((json) => document.getElementById("hint").innerText = "Tonart: " +json.ein[n-1].tonart);
                    var img = document.getElementById("ein-img");
                    img.src = "./mel-dik-media/" + String(n) + ".png"
                    img.style.visibility = "hidden";
                }

                function ein_aufloesen() {
                    var img = document.getElementById("ein-img");
                    img.style.visibility = "visible";
                }
            
              </script>
              
    </div>
    <std-foot></std-foot>
</body>
</html>